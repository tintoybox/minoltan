<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ï¼ˆã‚¹ãƒãƒ›å›ºå®šãƒœã‚¿ãƒ³ï¼‹å¤œé–“ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œï¼‰</title>
<meta name="description" content="ã‚¹ãƒãƒ›æœ€é©åŒ–ã•ã‚ŒãŸæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã€‚ImageObjectã¨BlogPostingã®JSON-LDã‚’ç”Ÿæˆã€‚å¤œé–“ãƒ¢ãƒ¼ãƒ‰ãƒ»CSVå¯¾å¿œãƒ»ãƒœã‚¿ãƒ³å›ºå®šå¯¾å¿œã€‚">
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#f8fafc;
  --text:#111;
  --card:#fff;
  --border:#e2e8f0;
  --accent:#2563eb;
  --danger:#dc2626;
  --code-bg:#1e293b;
  --code-text:#e2e8f0;
}
body.dark{
  --bg:#0f172a;
  --text:#e2e8f0;
  --card:#1e293b;
  --border:#334155;
  --accent:#3b82f6;
  --danger:#ef4444;
  --code-bg:#0f172a;
  --code-text:#e2e8f0;
}
body{
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Yu Gothic",sans-serif;
  background:var(--bg);
  color:var(--text);
  padding:16px;
  margin:0;
  max-width:1000px;
  transition:background 0.3s,color 0.3s;
}
h1{font-size:20px;margin-bottom:10px}
button,input,select,textarea{font-family:inherit}
button{
  background:var(--accent);color:#fff;border:none;
  padding:8px 12px;border-radius:6px;cursor:pointer;
  transition:background 0.3s,color 0.3s;
}
button.ghost{background:var(--card);border:1px solid var(--accent);color:var(--accent)}
button.danger{background:var(--danger);color:#fff;border:none}
button.theme-toggle{margin-left:auto}
.card{
  background:var(--card);border:1px solid var(--border);
  border-radius:8px;padding:12px;margin-bottom:12px;
  box-shadow:0 1px 3px rgba(0,0,0,0.05);
  transition:background 0.3s,border-color 0.3s;
}
.controls{
  display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px;align-items:center;
}
@media(max-width:768px){
  .controls{
    position:fixed;
    top:0;left:0;right:0;
    z-index:1000;
    background:var(--card);
    border-bottom:1px solid var(--border);
    box-shadow:0 2px 4px rgba(0,0,0,0.1);
    padding:8px;
    justify-content:flex-start;
    overflow-x:auto;
    gap:6px;
  }
  body{padding-top:100px;} /* ã‚¹ãƒãƒ›æ™‚ã€å›ºå®šãƒãƒ¼é«˜ã•åˆ†ã®ä½™ç™½ã‚’ç¢ºä¿ */
}
pre{
  background:var(--code-bg);color:var(--code-text);
  padding:10px;border-radius:6px;overflow:auto;
  max-height:400px;font-size:13px;
}
label{display:block;font-size:14px;margin-top:6px}
input[type=text],input[type=date],textarea,select{
  width:100%;max-width:300px;
  padding:6px;border:1px solid var(--border);
  border-radius:6px;margin-top:3px;
  background:var(--card);color:var(--text);
}
textarea{resize:vertical;min-height:80px}
.photo-card{position:relative;width:100%;max-width:340px}
.remove-icon{
  position:absolute;top:6px;right:8px;background:transparent;
  color:var(--danger);border:none;font-size:18px;cursor:pointer
}
.status{font-size:13px;padding:6px;border-radius:6px}
.status.ok{background:#dcfce7;color:#166534}
.status.warn{background:#fef9c3;color:#854d0e}
.small{font-size:13px;color:#64748b}
.grid{display:flex;flex-direction:column;gap:16px;}
@media(min-width:900px){
  .grid{flex-direction:row;align-items:flex-start;}
  aside{width:360px;}
}
</style>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
<h1>æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ï¼ˆã‚¹ãƒãƒ›å›ºå®šãƒœã‚¿ãƒ³ï¼‹å¤œé–“ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œï¼‰</h1>
<p class="small">ã‚¹ãƒãƒ›ã§ä½¿ã„ã‚„ã™ã„æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã€‚å¤œé–“ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œã€‚</p>
<h2 style="font-size:15px;">&lt;script type="application/ld+json"&gt;&lt;/script&gt;</h2>
<h2 style="font-size:15px;">&lt;div class="exif"&gt;&lt;/div&gt;</h2>
<div class="controls">
  <button id="addTop">ï¼‹ å†™çœŸãƒ•ã‚©ãƒ¼ãƒ è¿½åŠ </button>
  <button id="generateBtn">JSON-LDç”Ÿæˆ</button>
  <button id="downloadBtn" class="ghost">JSONãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
  <button id="copyBtn" class="ghost">JSONã‚³ãƒ”ãƒ¼</button>
  <button id="toggleFormat" class="ghost">ğŸ“ æ•´å½¢ï¼šON</button>
  <button id="themeToggle" class="ghost theme-toggle">ğŸŒ™ å¤œé–“ãƒ¢ãƒ¼ãƒ‰</button>
  <label style="font-size:13px;">CSVèª­è¾¼<input id="csvInput" type="file" accept=".csv,text/csv" style="margin-top:4px;"></label>
</div>

<div class="grid">
  <main>
    <div id="photosContainer"></div>
    <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;">
      <button id="addBottom" class="ghost">ï¼‹ ãƒ•ã‚©ãƒ¼ãƒ è¿½åŠ ï¼ˆä¸‹éƒ¨ï¼‰</button>
      <button id="clearAll" class="danger">ã™ã¹ã¦å‰Šé™¤</button>
    </div>

    <div class="card" style="margin-top:12px;max-width:340px;">
      <h2 style="font-size:16px;margin-bottom:6px;">CSVãƒ˜ãƒƒãƒ€ä¾‹</h2>
<pre>imageTitle,caption,contentUrl,creator,datePublished,locationName,latitude,longitude,locality,region,camera
å‚™ä¸­å›½åˆ†å¯ºã®èµ¤ç±³ç”°ã‚“ã¼,"ç§‹é¢¨ã«æºã‚Œã‚‹èµ¤ç±³ã®ç”°ã‚“ã¼",https://example.com/photo1.jpg,Tsuneaki Hiramatsu,2025-09-06,å‚™ä¸­å›½åˆ†å¯º,34.6725,133.8342,ç·ç¤¾å¸‚,å²¡å±±çœŒ,"Nikon Z7, NIKKOR Z 24-70mm f/4 S"</pre>
    </div>
  </main>

  <aside>
    <div class="card">
      <h2 style="font-size:16px;margin-bottom:6px;">BlogPostingï¼ˆä»»æ„ï¼‰</h2>
      <label>è¨˜äº‹URLï¼š<input type="text" id="bp_url" placeholder="https://example.com/blog/post"></label>
      <label>è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«ï¼š<input type="text" id="bp_headline"></label>
      <label>ä»£è¡¨ç”»åƒURLï¼š<input type="text" id="bp_image"></label>
      <label>è‘—è€…åï¼š
        <select id="bp_author_select">
          <option value="Tsuneaki Hiramatsu">Tsuneaki Hiramatsu</option>
          <option value="">ãã®ä»–</option>
        </select>
        <input type="text" id="bp_author_custom" placeholder="è‡ªç”±å…¥åŠ›">
      </label>
      <label>æŠ•ç¨¿æ—¥ï¼š<input type="date" id="bp_date"></label>
      <label>æœ¬æ–‡ï¼š<textarea id="bp_body"></textarea></label>
    </div>

    <div class="card">
      <h3 style="font-size:15px;">å‡ºåŠ›ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ / ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</h3>
      <div id="status" class="status">æœªç”Ÿæˆã§ã™ã€‚</div>
      <details style="margin-top:6px;"><summary>ç”Ÿæˆçµæœã‚’è¡¨ç¤º</summary><pre id="outputPre"></pre></details>
    </div>
  </aside>
</div>

<script>
document.addEventListener('DOMContentLoaded',()=>{
  const photosContainer=document.getElementById('photosContainer');
  const csvInput=document.getElementById('csvInput');
  const statusEl=document.getElementById('status');
  const outputPre=document.getElementById('outputPre');
  const themeBtn=document.getElementById('themeToggle');
  const formatBtn=document.getElementById('toggleFormat');
  let lastGenerated=null;
  let pretty=true;

  // å¤œé–“ãƒ¢ãƒ¼ãƒ‰
  const prefersDark=window.matchMedia('(prefers-color-scheme: dark)').matches;
  if(prefersDark)document.body.classList.add('dark');
  themeBtn.onclick=()=>{
    document.body.classList.toggle('dark');
    themeBtn.textContent=document.body.classList.contains('dark')?'â˜€ï¸ ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰':'ğŸŒ™ å¤œé–“ãƒ¢ãƒ¼ãƒ‰';
  };

  // JSONæ•´å½¢åˆ‡æ›¿
  formatBtn.onclick=()=>{
    pretty=!pretty;
    formatBtn.textContent=pretty?"ğŸ“ æ•´å½¢ï¼šON":"ğŸ“ æ•´å½¢ï¼šOFF";
    if(lastGenerated)outputPre.textContent=JSON.stringify(lastGenerated,null,pretty?2:0);
  };

  const uid=()=>crypto.randomUUID();
  const updateStatus=(msg,ok=true)=>{statusEl.textContent=msg;statusEl.className="status "+(ok?"ok":"warn");};

  function createPhotoCard(prefill={}){
    const id=uid();
    const card=document.createElement('div');
    card.className='card photo-card';
    card.dataset.id=id;
    card.innerHTML=`
      <button class="remove-icon" title="å‰Šé™¤">âœ•</button>
      <label>ã‚¿ã‚¤ãƒˆãƒ«ï¼š<input type="text" id="imageTitle_${id}" value="${prefill.imageTitle||''}"></label>
      <label>èª¬æ˜æ–‡ï¼š<textarea id="caption_${id}">${prefill.caption||''}</textarea></label>
      <label>ç”»åƒURLï¼š<input type="text" id="contentUrl_${id}" value="${prefill.contentUrl||''}"></label>
      <label>æ’®å½±è€…åï¼š<input type="text" id="creator_${id}" value="${prefill.creator||''}"></label>
      <label>æ’®å½±æ—¥ï¼š<input type="date" id="date_${id}" value="${prefill.datePublished||''}"></label>
      <label>æ’®å½±åœ°åï¼š<input type="text" id="locationName_${id}" value="${prefill.locationName||''}"></label>
      <label>ç·¯åº¦ï¼š<input type="text" id="latitude_${id}" value="${prefill.latitude||''}"></label>
      <label>çµŒåº¦ï¼š<input type="text" id="longitude_${id}" value="${prefill.longitude||''}"></label>
      <label>å¸‚åŒºç”ºæ‘ï¼š<input type="text" id="locality_${id}" value="${prefill.locality||''}"></label>
      <label>éƒ½é“åºœçœŒï¼š<input type="text" id="region_${id}" value="${prefill.region||''}"></label>
      <label>ã‚«ãƒ¡ãƒ©æƒ…å ±ï¼š<input type="text" id="camera_${id}" value="${prefill.camera||''}"></label>`;
    card.querySelector('.remove-icon').onclick=()=>{card.remove();updateStatus("å†™çœŸãƒ•ã‚©ãƒ¼ãƒ ã‚’å‰Šé™¤ã—ã¾ã—ãŸ");};
    photosContainer.appendChild(card);
  }

  document.getElementById('addTop').onclick=()=>{createPhotoCard();updateStatus("ãƒ•ã‚©ãƒ¼ãƒ è¿½åŠ ");};
  document.getElementById('addBottom').onclick=()=>{createPhotoCard();updateStatus("ãƒ•ã‚©ãƒ¼ãƒ è¿½åŠ ï¼ˆä¸‹ï¼‰");};
  document.getElementById('clearAll').onclick=()=>{if(confirm("ã™ã¹ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")){photosContainer.innerHTML='';updateStatus("å…¨å‰Šé™¤ã—ã¾ã—ãŸ");}};

  csvInput.addEventListener('change',e=>{
    const f=e.target.files[0];if(!f)return;
    Papa.parse(f,{header:true,complete:function(res){
      res.data.forEach(r=>createPhotoCard(r));
      updateStatus(res.data.length+"ä»¶ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ");
    }});
  });

  function collectImages(){
    const imgs=[];
    photosContainer.querySelectorAll('.photo-card').forEach(card=>{
      const id=card.dataset.id;
      const g=k=>document.getElementById(k+'_'+id)?.value.trim();
      const img={
        "@type":"ImageObject",
        name:g('imageTitle'),
        caption:g('caption'),
        contentUrl:g('contentUrl'),
        creator:g('creator')?{"@type":"Person","name":g('creator')}:undefined,
        datePublished:g('date'),
        locationCreated:{
          "@type":"Place",
          name:g('locationName'),
          geo:{"@type":"GeoCoordinates","latitude":g('latitude'),"longitude":g('longitude')},
          address:{"@type":"PostalAddress","addressLocality":g('locality'),"addressRegion":g('region'),"addressCountry":"JP"}
        },
        exifData:g('camera')?{"@type":"PropertyValue","name":"Camera","value":g('camera')}:undefined
      };
      imgs.push(img);
    });
    return imgs;
  }

  document.getElementById('generateBtn').onclick=()=>{
    const imgs=collectImages();
    const bp={
      "@type":"BlogPosting",
      headline:document.getElementById('bp_headline').value.trim(),
      image:imgs[0]?.contentUrl,
      author:{"@type":"Person","name":document.getElementById('bp_author_custom').value.trim()||document.getElementById('bp_author_select').value},
      datePublished:document.getElementById('bp_date').value,
      articleBody:document.getElementById('bp_body').value.trim(),
      url:document.getElementById('bp_url').value.trim()
    };
    const out=[bp,...imgs]; out[0]["@context"]="https://schema.org";
    outputPre.textContent=JSON.stringify(out,null,pretty?2:0);
    lastGenerated=out;
    updateStatus("JSON-LDã‚’ç”Ÿæˆã—ã¾ã—ãŸ");
  };

  document.getElementById('copyBtn').onclick=async()=>{
    if(!lastGenerated)return alert("ç”Ÿæˆã—ã¦ãã ã•ã„");
    await navigator.clipboard.writeText(JSON.stringify(lastGenerated,null,pretty?2:0));
    updateStatus("JSONã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
  };
});
</script>
</body>
</html>

